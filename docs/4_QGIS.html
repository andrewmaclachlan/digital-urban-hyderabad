<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Digital urban workshop - 3&nbsp; QGIS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./5_start.html" rel="next">
<link href="./3_loading_data.html" rel="prev">
<link href="./assets/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./general_images/casa_logo.jpg" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Digital urban workshop</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
</ul>
            <div class="quarto-navbar-tools tools-wide">
    <a href="https://github.com/andrewmaclachlan/digital-urban-hyderabad" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./4_QGIS.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">QGIS</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-course_info.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Software installation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2_spatial_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Spatial data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3_loading_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Getting the data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4_QGIS.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">QGIS</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./5_start.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Asking questions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./6_Otherdata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Other datasets</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#data" id="toc-data" class="nav-link active" data-scroll-target="#data"><span class="header-section-number">3.1</span> Data</a></li>
  <li><a href="#making-a-project" id="toc-making-a-project" class="nav-link" data-scroll-target="#making-a-project"><span class="header-section-number">3.2</span> Making a project</a></li>
  <li><a href="#using-qgis" id="toc-using-qgis" class="nav-link" data-scroll-target="#using-qgis"><span class="header-section-number">3.3</span> Using QGIS</a>
  <ul class="collapse">
  <li><a href="#moving-around-the-map" id="toc-moving-around-the-map" class="nav-link" data-scroll-target="#moving-around-the-map"><span class="header-section-number">3.3.1</span> Moving around the map</a></li>
  <li><a href="#saving-data" id="toc-saving-data" class="nav-link" data-scroll-target="#saving-data"><span class="header-section-number">3.3.2</span> Saving data</a></li>
  </ul></li>
  <li><a href="#adding-spatial-data" id="toc-adding-spatial-data" class="nav-link" data-scroll-target="#adding-spatial-data"><span class="header-section-number">3.4</span> Adding spatial data</a>
  <ul class="collapse">
  <li><a href="#setting-a-cordiante-reference-system" id="toc-setting-a-cordiante-reference-system" class="nav-link" data-scroll-target="#setting-a-cordiante-reference-system"><span class="header-section-number">3.4.1</span> Setting a cordiante reference system</a></li>
  <li><a href="#adding-csv-point-data" id="toc-adding-csv-point-data" class="nav-link" data-scroll-target="#adding-csv-point-data"><span class="header-section-number">3.4.2</span> Adding csv point data</a></li>
  <li><a href="#adding-raster-data" id="toc-adding-raster-data" class="nav-link" data-scroll-target="#adding-raster-data"><span class="header-section-number">3.4.3</span> Adding raster data</a></li>
  </ul></li>
  <li><a href="#filtering" id="toc-filtering" class="nav-link" data-scroll-target="#filtering"><span class="header-section-number">3.5</span> Filtering</a>
  <ul class="collapse">
  <li><a href="#by-attributes" id="toc-by-attributes" class="nav-link" data-scroll-target="#by-attributes"><span class="header-section-number">3.5.1</span> By attributes</a></li>
  <li><a href="#by-location" id="toc-by-location" class="nav-link" data-scroll-target="#by-location"><span class="header-section-number">3.5.2</span> By location</a></li>
  </ul></li>
  <li><a href="#joining" id="toc-joining" class="nav-link" data-scroll-target="#joining"><span class="header-section-number">3.6</span> Joining</a></li>
  <li><a href="#review" id="toc-review" class="nav-link" data-scroll-target="#review"><span class="header-section-number">3.7</span> Review</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/andrewmaclachlan/digital-urban-hyderabad/edit/main/4_QGIS.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/andrewmaclachlan/digital-urban-hyderabad/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">QGIS</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Quantum Geographical Information Systems (QGIS) is a free GIS. For the purpose of this workshop it can assist is in <strong>easily viewing spatial data</strong>. This includes point data (e.g.&nbsp;csv / spreadsheet data that has a latitude and longitude column) and spatial data such as shapefiles, geopackages and KMLs.</p>
<p>From the following page you should have installed QGIS. Open the software on your computer.</p>
<section id="data" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="data"><span class="header-section-number">3.1</span> Data</h2>
<p>The following data is used within this short practical.</p>
<ul>
<li><a href="https://data.opencity.in/dataset/hyderabad-schools">Open Data City schools</a></li>
<li><a href="https://download.geofabrik.de/">Open Street Map</a> - points of interest</li>
<li><a href="https://hub.worldpop.org/geodata/summary?id=49804">World pop population (2020)</a></li>
<li><a href="https://www.devdatalab.org/shrug_download/">Data Devevelopment Lab</a>
<ul>
<li>Population Census (9), 2011 Population Census Abstract<br>
</li>
<li>Open Polygons and Spatial Statistics, PC11 Subdistrict Polygons</li>
</ul></li>
</ul>
</section>
<section id="making-a-project" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="making-a-project"><span class="header-section-number">3.2</span> Making a project</h2>
<p>In QGIS we can make a “project”. The project stores relatively little information. However it will store the file path for each file you load. Say for example we load a shapefile (like we will later), if i create (and save) a project it will know where that file is stored and load it next time i open the project.</p>
<p>To create a project: Project (top left tool bar) &gt; Save as.</p>
</section>
<section id="using-qgis" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="using-qgis"><span class="header-section-number">3.3</span> Using QGIS</h2>
<section id="moving-around-the-map" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="moving-around-the-map"><span class="header-section-number">3.3.1</span> Moving around the map</h3>
<p>In the top tool bar there are a variety of buttons. Two are the most used:</p>
<ul>
<li>The white hand: let’s you scroll around the map</li>
<li>The blue i with an arrow: let’s you query what value the data has.</li>
</ul>
</section>
<section id="saving-data" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="saving-data"><span class="header-section-number">3.3.2</span> Saving data</h3>
<p>In the following sections we will be select data and exporting it.</p>
<p>There are many ways to export data, but two are often more common:</p>
<ul>
<li>Shapefiles - actually several files that make a shapefile</li>
<li>Geopackage - a container, like a folder that stores all spatial data. The benefit is that it is stored as a signle file meaning if we want to share our data we just share the 1 file!</li>
</ul>
<p>File management is up to you.</p>
<p>But to make a geopacakge for this work right click on the Geopackage name &gt; create database. Select no geometry here (as the Geopackage will not have any spatial information, but the files places within it will)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="general_images/geopackage.png" class="img-fluid figure-img" width="359"></p>
</figure>
</div>
</section>
</section>
<section id="adding-spatial-data" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="adding-spatial-data"><span class="header-section-number">3.4</span> Adding spatial data</h2>
<p>You will be presented with a blank map. To assist us in navigating on the top tool bar select Web &gt; Quick Map Services &gt; OSM &gt; OSM standard</p>
<p>This will provide us with a “basemap” it is actually the same as OpenStreetMap but the features are not queryable and it is <strong>just an image</strong>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="general_images/basemap.png" class="img-fluid figure-img" width="539"></p>
</figure>
</div>
<p>Now, let’s add some data. To add a spatial layer (e.g.&nbsp;a shapefile) you can simply drag and drop it into QGIS. Find any shapefile (.shp) within the data and drag it in. Note you will need to unzip the zipped files. E.g. add the gis_osm_pois_free_1 or any other shapefile from the Open Street Map data</p>
<p><strong>Note</strong> that a shapefile is composed of a variety of files! See the <a href="https://andrewmaclachlan.github.io/CASA0005repo/geographic-information.html#shapefiles">explaination of shapefiles</a></p>
<p>For the purpose of this workshop select the <code>.shp</code> and drag it in.</p>
<p>In a similar theme we can also drag and drop in a KML file. Here, i have add the point of interest layer from the OpenStreetMap data (that i downloaded) and the schools data (KML) from Open Data City. Note that we can see the files in the <code>layer</code> tab on the left. If we uncheck a box the layer is removed from the map.</p>
<p>We can also right click a layer and <code>zoom to layer</code> to see the full extent of it (here, all the points).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="general_images/all_points.png" class="img-fluid figure-img" width="582"></p>
</figure>
</div>
<section id="setting-a-cordiante-reference-system" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="setting-a-cordiante-reference-system"><span class="header-section-number">3.4.1</span> Setting a cordiante reference system</h3>
<p>There are two coordinate reference systems to be aware of:</p>
<ul>
<li>That of each data layer</li>
<li>That of the “map layer” or the “canvas” in QGIS.</li>
</ul>
<section id="crs-of-data" class="level4" data-number="3.4.1.1">
<h4 data-number="3.4.1.1" class="anchored" data-anchor-id="crs-of-data"><span class="header-section-number">3.4.1.1</span> CRS of data</h4>
<p>Each spatial layer will have a coordinate reference system. If we right click on the point of interest layer from OSM &gt; properties &gt; information. We can see that the CRS is EPSG:4326 - WGS84.</p>
<p><img src="general_images/properties_CRS.png" class="img-fluid"></p>
<p>If we do the same for the school data (from Open Data City) we get the same CRS.</p>
<p>This is a geographic CRS and we can see that the units are in degrees - so not very helpful if we want to work out distance!</p>
<p>To transform the CRS to something more use (in metric units) we can use the <code>reproject layer</code> function.</p>
<p>First, make sure the processing toolbox is on the screen. Processing &gt; Toolbox. The processing tool should appear. Search for Reproject layer. A good one for Hyderabad is 32644.</p>
<p>For this example i have transformed:</p>
<ul>
<li>The sub districts</li>
<li>The OSM points</li>
<li>The Open Data City schools</li>
</ul>
</section>
<section id="crs-of-the-map" class="level4" data-number="3.4.1.2">
<h4 data-number="3.4.1.2" class="anchored" data-anchor-id="crs-of-the-map"><span class="header-section-number">3.4.1.2</span> CRS of the map</h4>
<p>In the bottom right corner of QGIS you will see an EPSG for the map - mine is 4326. QGIS sets this <strong>based on the first dataset loaded</strong>.</p>
<p>If a new dataset is loaded that is different you will get a warning. But QGIS <strong>reproejcts on the fly</strong> this means that any new data will be shown as if it is in the map CRS.</p>
<p>Nevertheless we should always reproject our data before analysis to a local CRS!</p>
</section>
</section>
<section id="adding-csv-point-data" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="adding-csv-point-data"><span class="header-section-number">3.4.2</span> Adding csv point data</h3>
<p>If we had a csv file with latitude and longitude as points we can add this as a spatial layer through the <a href="https://andrewmaclachlan.github.io/CASA0005repo/geographic-information.html#load-data">data source manager</a>.</p>
</section>
<section id="adding-raster-data" class="level3" data-number="3.4.3">
<h3 data-number="3.4.3" class="anchored" data-anchor-id="adding-raster-data"><span class="header-section-number">3.4.3</span> Adding raster data</h3>
<p>For raster data we can drag and drop it again! For example download the <a href="https://hub.worldpop.org/geodata/summary?id=49804">worldpop 2020 estiamtes for India</a></p>
<p>Then drag and drop!</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>There are many ways we can use / extract data from a raster file. This is beyond the workshop. But we can convert this to vector (points or polygons) and reproject it if needed.</p>
</div>
</div>
</div>
</section>
</section>
<section id="filtering" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="filtering"><span class="header-section-number">3.5</span> Filtering</h2>
<section id="by-attributes" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="by-attributes"><span class="header-section-number">3.5.1</span> By attributes</h3>
<p>Within my sub district data, i know that Hyderabad has a district value of 536. However, my sub district data is for the whole if India.</p>
<p>To select just the sub district polygons i want. Right click on the sub district layer in the <code>layers</code> tab (left of screen) &gt; open attribute table. At the top of the attribute table there will be a funnel icon, click it.</p>
<p>You will then see all the columns of the sub district shapefile and we can enter a filter value…</p>
<p><img src="general_images/filter.png" class="img-fluid"></p>
<p>Enter the value and click select features &gt; close the attribute table.</p>
<p>Go to the sub district layer &gt; right click &gt; zoom to selection. You should see that the villages within Hyderabad have been selected.</p>
<p>We can now export just these features. Right click the sub district layer &gt; export &gt; save <strong>selected</strong> features as…</p>
<p>The new layer will be added to the map.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="general_images/Hyderabad_subdistricts.png" class="img-fluid figure-img" width="296"></p>
</figure>
</div>
</section>
<section id="by-location" class="level3" data-number="3.5.2">
<h3 data-number="3.5.2" class="anchored" data-anchor-id="by-location"><span class="header-section-number">3.5.2</span> By location</h3>
<p>If i now overlay my OpenStreetMap points of interest, it will become quite obvious that the points go beyond our study area.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="general_images/points_outside_study_area.png" class="img-fluid figure-img" width="370"></p>
</figure>
</div>
<p>In order to constrain our points to the Hyderabad sub districts we can select the points that intersect it, through a <strong>select by location</strong>…</p>
<p>Go to Vector (top toolbar) &gt; research tools &gt; select by location. We want to select features <strong>from</strong> the points layer (here the open street maps points) by comparing them to the boundary of the <strong>Hyderabad sub districts</strong>.</p>
<p>You can select what <strong>operator</strong> to use, intersects is typically the default in most spatial applications..</p>
<p>Once this has been run the points within the boundary are selected. However, this has not been saved. If you open the attribute table of the OpenStreetMap points in the top bar of the attribute table it will state selected: 3488. To save our selected data we again need to right click &gt; export &gt; save <strong>selected features as</strong></p>
</section>
</section>
<section id="joining" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="joining"><span class="header-section-number">3.6</span> Joining</h2>
<p>Whilst we have completed some spatial operations we have yet to join our census data to our spatial data.</p>
<p>Here, i have downloaded the <a href="https://www.devdatalab.org/shrug_download/">2011 Population Census Abstract data from the Development Data Lab</a>. This downloads as the folder <code>shurg-td11-csv</code>. On exploring the data (in excel) i see that it contains a sub district ID column.</p>
<p>Drag in the csv file from the census to QGIS layers</p>
<p>Right click on our Hyderabad sub districts layer &gt; properties.</p>
<p>On the properties window select joins (in the left column).</p>
<ul>
<li><p>Select the join layer as the csv - this is the layer to be joined to our spatial data</p></li>
<li><p>Select the join field as the sub district ID field from the csv</p></li>
<li><p>Select the target field as the sub district ID field from our spatial data:</p></li>
</ul>
<p><img src="general_images/joins.png" class="img-fluid"></p>
<p>Open the attribute table of our Hyderabad sub districts and you should see that all the census columns are present.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p><strong>However</strong> the join is not permanent. To keep this data you must export the file like we have done before!</p>
</div>
</div>
</div>
</section>
<section id="review" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="review"><span class="header-section-number">3.7</span> Review</h2>
<p>This has been a brief introduction to QGIS.</p>
<p>Consider the following:</p>
<ul>
<li>What is a GIS</li>
<li>How can we filter our data based on attrbiutes or location</li>
<li>How can we join non spatial data to spatial data</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./3_loading_data.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Getting the data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./5_start.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Asking questions</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>